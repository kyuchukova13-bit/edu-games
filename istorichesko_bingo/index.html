<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BINGO - –ò—Å—Ç–æ—Ä–∏—è 3. –ö–ª–∞—Å - D. Kyuchukova</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@500&family=Roboto+Condensed:wght@700&display=swap');

        :root {
            --bg-gradient: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            --gold-ball: radial-gradient(circle at 15px 15px, #f1c40f, #d35400);
            --accent-red: #c0392b;
        }

        body, html {
            margin: 0; padding: 0; min-height: 100vh;
            font-family: 'Arial Black', Gadget, sans-serif;
            background: #1a2a6c; color: white;
        }

        /* –ù–ê–ß–ê–õ–ï–ù –ï–ö–†–ê–ù */
        #intro-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-gradient);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 500; text-align: center; padding: 20px; box-sizing: border-box;
        }
        #intro-screen h1 { font-size: 65px; text-shadow: 4px 4px 10px rgba(0,0,0,0.5); margin-bottom: 5px; }
        .author-name-intro { font-size: 28px; color: #fdbb2d; margin-bottom: 25px; font-family: 'Segoe UI', sans-serif; }
        
        .instructions-intro { 
            font-size: 21px; line-height: 1.5; max-width: 800px; 
            background: rgba(0,0,0,0.3); padding: 35px; border-radius: 20px; margin-bottom: 40px;
            font-family: 'Segoe UI', sans-serif; text-align: left;
        }
        .btn-group { display: flex; gap: 20px; }
        #start-btn, #open-generator-btn { 
            padding: 20px 60px; font-size: 28px; cursor: pointer; 
            border: none; border-radius: 50px; font-weight: bold; box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: 0.2s;
        }
        #start-btn { background: white; color: #b21f1f; }
        #open-generator-btn { background: #fdbb2d; color: #333; }

        /* –ò–ì–†–ê */
        .main-container { display: none; height: 100vh; width: 100vw; align-items: center; justify-content: space-around; padding: 20px; box-sizing: border-box; }
        #lotto-sphere { position: relative; width: 480px; height: 480px; background: rgba(255,255,255,0.05); border: 12px solid rgba(255,255,255,0.2); border-radius: 50%; overflow: hidden; }
        .ball { position: absolute; width: 52px; height: 52px; background: var(--gold-ball); border-radius: 50%; color: white; font-weight: bold; font-size: 20px; display: flex; align-items: center; justify-content: center; }
        #check-btn { margin-top: 15px; padding: 10px 25px; background: none; border: 1px solid rgba(255,255,255,0.4); color: white; cursor: pointer; }
        .answer-section { flex: 1.2; display: flex; flex-direction: column; align-items: center; }
        #bingo-title { font-size: 100px; margin: 0; color: #fdbb2d; letter-spacing: 15px; }
        .flip-card { width: 95%; height: 380px; position: relative; transform-style: preserve-3d; transition: transform 0.8s; margin: 20px 0; }
        .is-flipped { transform: rotateX(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; box-sizing: border-box; }
        .card-front { background: rgba(255,255,255,0.08); border: 4px dashed rgba(255,255,255,0.2); }
        .card-back { background: white; transform: rotateX(180deg); border: 10px solid #f1c40f; color: #1a2a6c; }
        #result-ball { width: 100px; height: 100px; background: var(--gold-ball); border-radius: 50%; color: white; font-size: 50px; display: flex; align-items: center; justify-content: center; border: 4px solid #fff; margin-bottom: 10px; }
        #riddle-text { font-size: 38px; text-align: center; font-weight: bold; line-height: 1.2; font-family: 'Segoe UI', sans-serif; }
        #draw-btn { padding: 20px 80px; font-size: 35px; background: var(--accent-red); color: white; border: 4px solid #fdbb2d; border-radius: 100px; cursor: pointer; font-weight: bold; }

        /* –ù–û–í–ò–Ø–¢ –ì–ï–ù–ï–†–ê–¢–û–† –û–¢ –í–ê–®–ò–Ø –§–ê–ô–õ */
        #generator-section { display: none; background: #f0f0f0; color: #333; padding: 20px; }
        .gen-controls { background: white; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .page { width: 21cm; min-height: 29.7cm; padding: 1cm; margin: 0 auto; background: white; display: flex; flex-direction: column; align-items: center; box-sizing: border-box; }
        
        .ticket { 
            width: 18cm; height: 12.5cm; border: 4px solid #333; border-radius: 15px;
            margin-bottom: 1.5cm; padding: 20px; box-sizing: border-box; background: #fff;
            display: flex; flex-direction: column; position: relative;
        }
        .ticket-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #b21f1f; margin-bottom: 15px; padding-bottom: 5px; }
        .ticket-title { font-family: 'Oswald', sans-serif; font-size: 42px; color: #b21f1f; text-transform: uppercase; letter-spacing: 3px; margin: 0; }
        .ticket-number { font-family: 'Oswald', sans-serif; font-size: 24px; background: #333; color: #fff; padding: 5px 15px; border-radius: 5px; }
        
        .ticket table { border-collapse: separate; border-spacing: 8px; width: 100%; flex-grow: 1; table-layout: fixed; }
        .ticket td { 
            border: 2px solid #333; text-align: center; font-family: 'Roboto Condensed', sans-serif;
            font-size: 26px; padding: 10px; background: #fafafa; border-radius: 8px;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.05); line-height: 1.1; vertical-align: middle;
        }
        .ticket-footer { margin-top: 10px; display: flex; justify-content: space-between; font-size: 14px; font-style: italic; color: #666; }

        #check-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 600; display: none; flex-direction: column; align-items: center; padding: 40px; }
        #check-log { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; width: 90%; margin-top: 30px; }
        .log-item { background: white; color: #333; padding: 12px; border-radius: 8px; border-left: 10px solid #f1c40f; font-family: sans-serif; text-align: left;}

        @media print {
            .gen-controls, #intro-screen, #game-main, #check-screen { display: none !important; }
            body { background: white; }
            #generator-section { display: block !important; padding: 0; }
            .page { margin: 0; padding: 0.5cm; page-break-after: always; border: none; }
            .ticket { page-break-inside: avoid; border: 3px solid #000; -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div id="intro-screen">
        <h1>–ò–°–¢–û–†–ò–ß–ï–°–ö–û –ë–ò–ù–ì–û</h1>
        <div class="author-name-intro">Created by Dochka Kyuchukova</div>
        <div class="instructions-intro">
            <strong>–£–ö–ê–ó–ê–ù–ò–Ø –ó–ê –ò–ì–†–ê–¢–ê:</strong><br><br>
            ‚Ä¢ –°–ª—É—à–∞–π –≤–Ω–∏–º–∞—Ç–µ–ª–Ω–æ –∑–∞–≥–∞–¥–∫–∞—Ç–∞, –∫–æ—è—Ç–æ —â–µ —Å–µ –ø–æ—è–≤–∏ –Ω–∞ –µ–∫—Ä–∞–Ω–∞.<br>
            ‚Ä¢ –ê–∫–æ –∑–Ω–∞–µ—à –æ—Ç–≥–æ–≤–æ—Ä–∞ –∏ –≥–æ –æ—Ç–∫—Ä–∏–µ—à –≤ —Å–≤–æ—è –±–∏–ª–µ—Ç ‚Äì –∑–∞—á–µ—Ä–∫–Ω–∏ –≥–æ!<br>
            ‚Ä¢ –ö–æ–≥–∞—Ç–æ –∑–∞–ø—ä–ª–Ω–∏—à –≤—Å–∏—á–∫–∏ 9 –ø–æ–ª–µ—Ç–∞ –≤ –±–∏–ª–µ—Ç–∞ —Å–∏, –∏–∑–≤–∏–∫–∞–π —Å–∏–ª–Ω–æ <b>"–ë–ò–ù–ì–û"</b>!<br>
                   </div>
        <div class="btn-group">
            <button id="start-btn" onclick="startGame()">–°–¢–ê–†–¢</button>
            <button id="open-generator-btn" onclick="openGenerator()">–ü–†–ò–ù–¢–ò–†–ê–ô –ë–ò–õ–ï–¢–ò</button>
        </div>
    </div>

    <div id="generator-section">
        <div class="gen-controls">
            <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ –ë–∏–Ω–≥–æ</h1>
            <button onclick="window.print()">–ü–ï–ß–ê–¢–ê–ô –ë–ò–õ–ï–¢–ò–¢–ï</button>
            <button onclick="location.reload()" style="background:#666; margin-left:10px;">–ù–ê–ó–ê–î</button>
        </div>
        <div id="tickets-container"></div>
    </div>

    <div id="check-screen">
        <h1 style="color: #fdbb2d;">–ü–†–û–í–ï–†–ö–ê –ù–ê –ü–û–ù–Ø–¢–ò–Ø–¢–ê</h1>
        <div id="check-log"></div>
        <button style="margin-top: 40px; padding: 15px 50px; background: #2ecc71; color: white; border: none; border-radius: 10px; font-size: 22px; cursor: pointer; font-weight: bold;" onclick="closeCheck()">–û–ë–†–ê–¢–ù–û</button>
    </div>

    <div class="main-container" id="game-main">
        <div class="sphere-section">
            <div id="lotto-sphere"></div>
            <button id="check-btn" onclick="openCheck()">üîé –ü–†–û–í–ï–†–ö–ê</button>
        </div>
        <div class="answer-section">
            <h1 id="bingo-title">BINGO</h1>
            <div class="flip-card" id="card">
                <div class="card-face card-front"><span style="font-size: 150px; opacity: 0.1;">?</span></div>
                <div class="card-face card-back"><div id="result-ball">0</div><p id="riddle-text"></p></div>
            </div>
            <button id="draw-btn" onclick="drawBall()">–ò–ó–¢–ï–ì–õ–ò</button>
        </div>
    </div>

    <script>
        const riddles = ["–í—Å–∏—á–∫–æ, –∫–æ–µ—Ç–æ –≤–µ—á–µ —Å–µ –µ —Å–ª—É—á–∏–ª–æ.", "–ü–µ—Ä–∏–æ–¥ –æ—Ç —Ç–æ—á–Ω–æ 10 –≥–æ–¥–∏–Ω–∏.", "–í—Ä–µ–º–µ, –∫–æ–µ—Ç–æ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ 100 –≥–æ–¥–∏–Ω–∏.", "–û–≥—Ä–æ–º–µ–Ω –ø–µ—Ä–∏–æ–¥ –æ—Ç —Ç–æ—á–Ω–æ 1000 –≥–æ–¥–∏–Ω–∏.", "–ï–¥–Ω–∞ –æ–±–∏–∫–æ–ª–∫–∞ –Ω–∞ –ó–µ–º—è—Ç–∞ –æ–∫–æ–ª–æ –°–ª—ä–Ω—Ü–µ—Ç–æ.", "–í–∞–∂–Ω–∞ —Å–ª—É—á–∫–∞ –≤ –º–∏–Ω–∞–ª–æ—Ç–æ.", "–ü–æ–¥—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏—è—Ç–∞ –µ–¥–Ω–æ —Å–ª–µ–¥ –¥—Ä—É–≥–æ.", "–ù–∞—É–∫–∞—Ç–∞ –∑–∞ –º–∏–Ω–∞–ª–æ—Ç–æ –Ω–∞ —á–æ–≤–µ–∫–∞.", "–î—Ä–µ–≤–µ–Ω –Ω–∞—Ä–æ–¥, —Å—Ç—Ä–æ–∏—Ç–µ–ª –Ω–∞ –≥—Ä–æ–±–Ω–∏—Ü–∏.", "–í–ª–∞–¥–µ—Ç–µ–ª—è—Ç –Ω–∞ –°—Ç–∞—Ä–∞ –í–µ–ª–∏–∫–∞ –ë—ä–ª–≥–∞—Ä–∏—è.", "–û—Å–Ω–æ–≤–∞—Ç–µ–ª—è—Ç –Ω–∞ –ë—ä–ª–≥–∞—Ä–∏—è –Ω–∞ –ë–∞–ª–∫–∞–Ω–∏—Ç–µ.", "–ì–æ–¥–∏–Ω–∞—Ç–∞ –Ω–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ë—ä–ª–≥–∞—Ä–∏—è.", "–ß–µ—Ä—Ç–µ–∂, –≤—ä—Ä—Ö—É –∫–æ–π—Ç–æ –ø–æ–¥—Ä–µ–∂–¥–∞–º–µ –¥–∞—Ç–∏—Ç–µ.", "–ö–æ–π –≤–µ–∫ –µ 681 –≥–æ–¥–∏–Ω–∞?", "–ö–æ–π –≤–µ–∫ –µ 811 –≥–æ–¥–∏–Ω–∞?", "–ü—Ä–µ–¥–º–µ—Ç–∏, –æ—Ç –∫–æ–∏—Ç–æ –Ω–∞—É—á–∞–≤–∞–º–µ –∑–∞ –º–∏–Ω–∞–ª–æ—Ç–æ.", "–£—á–µ–Ω, –∫–æ–π—Ç–æ –ø—Ä–∞–≤–∏ —Ä–∞–∑–∫–æ–ø–∫–∏ –ø–æ–¥ –∑–µ–º—è—Ç–∞.", "–ú—è—Å—Ç–æ, –∫—ä–¥–µ—Ç–æ —Å–µ –ø–∞–∑—è—Ç —Å—Ç–∞—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç–∏.", "–¢–µ—Ä–∏—Ç–æ—Ä–∏—è —Å –æ–±—â–∏ –∑–∞–∫–æ–Ω–∏ –∏ –≤–ª–∞–¥–µ—Ç–µ–ª.", "–ù–∞–π-–≤–∞–∂–Ω–∏—è—Ç –≥—Ä–∞–¥ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥—ä—Ä–∂–∞–≤–∞—Ç–∞.", "–ü—ä—Ä–≤–∞—Ç–∞ —Å—Ç–æ–ª–∏—Ü–∞ –Ω–∞ –ê—Å–ø–∞—Ä—É—Ö–æ–≤–∞ –ë—ä–ª–≥–∞—Ä–∏—è.", "–û—Å–Ω–æ–≤–Ω–∞—Ç–∞ —á–∞—Å—Ç –æ—Ç –≤–æ–π—Å–∫–∞—Ç–∞ –Ω–∞ –ø—Ä–∞–±—ä–ª–≥–∞—Ä–∏—Ç–µ.", "–†–∏—Å—É–Ω–∫–∏ –≤—ä—Ä—Ö—É —Å—Ç–µ–Ω–∏ –Ω–∞ –≥—Ä–æ–±–Ω–∏—Ü–∏.", "–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ, –∑–∞ –¥–∞ –Ω–∞–ø–æ–º–Ω—è –∑–∞ —Å–ª–∞–≤–∞."];
        const terms = ["–ò–°–¢–û–†–ò–Ø", "–î–ï–°–ï–¢–ò–õ–ï–¢–ò–ï", "–í–ï–ö", "–•–ò–õ–Ø–î–û–õ–ï–¢–ò–ï", "–ì–û–î–ò–ù–ê", "–°–™–ë–ò–¢–ò–ï", "–•–†–û–ù–û–õ–û–ì–ò–Ø", "–ò–ó–í–û–†–ò", "–¢–†–ê–ö–ò", "–•–ê–ù –ö–£–ë–†–ê–¢", "–•–ê–ù –ê–°–ü–ê–†–£–•", "681 –ì–û–î–ò–ù–ê", "–õ–ò–ù–ò–Ø –ù–ê –í–†–ï–ú–ï–¢–û", "VII –í–ï–ö", "–•–ê–ù –ö–†–£–ú", "–ù–ê–•–û–î–ö–ò", "–ê–†–•–ï–û–õ–û–ì", "–ú–£–ó–ï–ô", "–î–™–†–ñ–ê–í–ê", "–°–¢–û–õ–ò–¶–ê", "–ü–õ–ò–°–ö–ê", "–ö–û–ù–ù–ò–¶–ê", "–°–¢–ï–ù–û–ü–ò–°–ò", "–ü–ê–ú–ï–¢–ù–ò–ö"];
        
        let pool = Array.from(Array(riddles.length).keys()), drawnHistory = [];
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function startGame() { document.getElementById('intro-screen').style.display = 'none'; document.getElementById('game-main').style.display = 'flex'; if (audioCtx.state === 'suspended') audioCtx.resume(); }
        function openGenerator() { document.getElementById('intro-screen').style.display = 'none'; document.getElementById('generator-section').style.display = 'block'; generateTickets(20); }

        function generateTickets(count) {
            const container = document.getElementById('tickets-container'); container.innerHTML = '';
            for (let i = 1; i <= count; i += 2) {
                const page = document.createElement('div'); page.className = 'page';
                page.innerHTML = createMarkup(i) + createMarkup(i + 1);
                container.appendChild(page);
            }
        }

        function createMarkup(num) {
            const selected = [...terms].sort(() => 0.5 - Math.random()).slice(0, 9);
            let h = `<div class="ticket"><div class="ticket-header"><h1 class="ticket-title">BINGO</h1><div class="ticket-number">‚Ññ${num}</div></div><table>`;
            for (let r = 0; r < 3; r++) { h += "<tr>"; for (let c = 0; c < 3; c++) h += `<td>${selected[r*3+c]}</td>`; h += "</tr>"; }
            h += `</table><div class="ticket-footer"><span>–°–ª—É—à–∞–π –∑–∞–≥–∞–¥–∫–∞—Ç–∞ –∏ –∑–∞—á–µ—Ä–∫–Ω–∏!</span><span>Made by D. Kyuchukova</span></div></div>`;
            return h;
        }

        function playSound(f, d) { const o = audioCtx.createOscillator(), g = audioCtx.createGain(); o.connect(g); g.connect(audioCtx.destination); o.frequency.value = f; g.gain.setValueAtTime(0.05, audioCtx.currentTime); o.start(); o.stop(audioCtx.currentTime + d); }

        const sphere = document.getElementById('lotto-sphere'), balls = [];
        for (let i = 0; i < riddles.length; i++) {
            const el = document.createElement('div'); el.className = 'ball'; el.innerText = i + 1;
            el.style.left = Math.random() * 400 + 'px'; el.style.top = Math.random() * 400 + 'px';
            sphere.appendChild(el); balls.push({ el, x: Math.random() * 2 - 1, y: Math.random() * 2 - 1, speed: 1.5 });
        }

        function update() {
            balls.forEach(b => {
                let x = parseFloat(b.el.style.left), y = parseFloat(b.el.style.top);
                if (x <= 0 || x >= 425) b.x *= -1; if (y <= 0 || y >= 425) b.y *= -1;
                b.el.style.left = (x + b.x * b.speed) + 'px'; b.el.style.top = (y + b.y * b.speed) + 'px';
            });
            requestAnimationFrame(update);
        }
        update();

        function drawBall() {
            if (pool.length === 0) return;
            const btn = document.getElementById('draw-btn'); btn.disabled = true;
            document.getElementById('card').classList.remove('is-flipped');
            balls.forEach(b => b.speed = 18);
            const mixSound = setInterval(() => playSound(150 + Math.random()*250, 0.05), 80);
            setTimeout(() => {
                clearInterval(mixSound); balls.forEach(b => b.speed = 1.5);
                playSound(440, 0.2);
                const rIdx = pool.splice(Math.floor(Math.random()*pool.length), 1)[0];
                const ballEl = balls.find(b => b.el.innerText == (rIdx+1));
                if(ballEl) ballEl.el.style.display = 'none';
                drawnHistory.push({ num: rIdx + 1, term: terms[rIdx] });
                document.getElementById('result-ball').innerText = rIdx + 1;
                document.getElementById('riddle-text').innerText = riddles[rIdx];
                document.getElementById('card').classList.add('is-flipped');
                btn.disabled = false;
            }, 1200);
        }

        function openCheck() {
            const log = document.getElementById('check-log'); log.innerHTML = '';
            drawnHistory.forEach(item => {
                const div = document.createElement('div'); div.className = 'log-item';
                div.innerHTML = `<b>‚Ññ${item.num}</b> ‚Äî ${item.term}`;
                log.appendChild(div);
            });
            document.getElementById('check-screen').style.display = 'flex';
        }
        function closeCheck() { document.getElementById('check-screen').style.display = 'none'; }
    </script>
</body>
</html>