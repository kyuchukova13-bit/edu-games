<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>–î–£–ï–õ: –ö–æ—è –¥—É–º–∞ —Å–µ —Å–∫—Ä–∏?</title>
<style>
    :root {
        --bright-blue: #0066cc;
        --dark-blue: #003399;
        --orange: #ff9900;
        --yellow: #ffcc00;
        --lemon: #ffffcc;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: var(--bright-blue);
        text-align: center;
        margin: 0;
        padding: 0;
        color: var(--dark-blue);
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
    }

    .screen {
        background: var(--lemon);
        width: 95%;
        max-width: 1150px;
        height: 92vh;
        padding: 20px;
        border-radius: 40px;
        box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        display: none;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        border: none;
    }

    #startScreen { display: flex; }

    .scoreboard {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        padding: 0 80px;
        box-sizing: border-box;
    }
    .score-box { font-size: 80px; font-weight: 900; }
    .p1-score { color: var(--orange); }
    .p2-score { color: var(--dark-blue); }

    h1 { font-size: 45px; margin: 5px 0; white-space: nowrap; }
    
    #wordBox {
        font-size: 110px;
        font-weight: bold;
        margin: 5px auto;
        padding: 25px 60px;
        background: white;
        border-radius: 35px;
        display: inline-block;
        min-width: 450px;
        color: var(--bright-blue);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        visibility: hidden;
    }

    .duel-container {
        display: flex;
        justify-content: space-around;
        width: 100%;
        gap: 30px;
    }

    .player-side {
        flex: 1;
        padding: 20px;
        border-radius: 30px;
        background: rgba(255,255,255,0.4);
    }

    .player-side h3 { margin: 0 0 20px 0; font-size: 32px; }

    .options { display: flex; flex-direction: column; gap: 15px; align-items: center; }

    button {
        font-size: 34px;
        padding: 18px 20px;
        width: 100%;
        max-width: 350px;
        border-radius: 25px;
        border: none;
        cursor: pointer;
        color: white;
        font-weight: bold;
        transition: 0.2s;
    }

    .btn-p1 { background: var(--orange); box-shadow: 0 6px 0 #e68a00; }
    .btn-p2 { background: var(--dark-blue); box-shadow: 0 6px 0 #002266; }
    button:active { transform: translateY(4px); box-shadow: none; }

    /* –§–ò–ö–° –ó–ê –¶–ï–ù–¢–†–ò–†–ê–ù–ï –ù–ê –ë–£–¢–û–ù–ò–¢–ï */
    .start-btn { 
        background: var(--yellow);
        box-shadow: 0 8px 0 #cc9900; 
        font-size: 42px;
        color: var(--dark-blue);
        padding: 25px 60px;
        border-radius: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px; /* –†–∞–∑—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–∫—Å—Ç–∞ –∏ —Ä–∞–∫–µ—Ç–∞—Ç–∞ */
        min-width: 550px; /* –î–æ—Å—Ç–∞—Ç—ä—á–Ω–æ —à–∏—Ä–æ–∫–æ –ø–æ–ª–µ */
        margin: 10px auto;
        border: none;
        cursor: pointer;
        font-weight: bold;
    }

    #message { font-size: 32px; font-weight: bold; color: #d32f2f; height: 40px; }

    .instructions-box {
        text-align: center;
        background: white;
        padding: 25px;
        border-radius: 30px;
        max-width: 800px;
        font-size: 26px;
    }

    .branding { position: fixed; bottom: 15px; right: 20px; opacity: 0.5; }
</style>
</head>
<body>

<div id="startScreen" class="screen">
    <h1>üëÄ –ö–û–Ø –î–£–ú–ê –°–ï –°–ö–†–ò?</h1>
    <div style="font-weight: bold; font-size: 22px;">–ê–≤—Ç–æ—Ä: D. Kyuchukova</div>
    
    <div class="instructions-box">
        <p>1. –ì–ª–µ–¥–∞–π—Ç–µ –¥—É–º–∞—Ç–∞ –≤ —Ü–µ–Ω—Ç—ä—Ä–∞. üëÄ</p>
        <p>2. –ö–æ–≥–∞—Ç–æ —Å–µ —Å–∫—Ä–∏–µ, —è –∏–∑–±–µ—Ä–µ—Ç–µ –æ—Ç –≤–∞—à–∞—Ç–∞ —Å—Ç—Ä–∞–Ω–∞. üëâ</p>
        <p>3. –ö–æ–π—Ç–æ –µ –ø–æ-–±—ä—Ä–∑, –ø–µ—á–µ–ª–∏ —Ç–æ—á–∫–∞! üöÄ</p>
    </div>
    
    <button class="start-btn" onclick="startLevel(1)">
        <span>–ó–ê–ü–û–ß–ù–ò –î–£–ï–õ–ê</span>
        <span>üöÄ</span>
    </button>
</div>

<div id="gameScreen" class="screen">
    <div class="scoreboard">
        <div id="score1" class="score-box p1-score">0</div>
        <div id="levelTag" style="font-weight: bold; font-size: 32px; background: white; padding: 8px 25px; border-radius: 20px;">–ù–∏–≤–æ 1</div>
        <div id="score2" class="score-box p2-score">0</div>
    </div>

    <div id="wordBox"></div>
    
    <div class="duel-container">
        <div class="player-side">
            <h3>–ò–ì–†–ê–ß 1</h3>
            <div class="options" id="p1-options">
                <button class="btn-p1" id="p1-opt0" onclick="check(1, 0)"></button>
                <button class="btn-p1" id="p1-opt1" onclick="check(1, 1)"></button>
                <button class="btn-p1" id="p1-opt2" onclick="check(1, 2)"></button>
            </div>
        </div>

        <div class="player-side">
            <h3>–ò–ì–†–ê–ß 2</h3>
            <div class="options" id="p2-options">
                <button class="btn-p2" id="p2-opt0" onclick="check(2, 0)"></button>
                <button class="btn-p2" id="p2-opt1" onclick="check(2, 1)"></button>
                <button class="btn-p2" id="p2-opt2" onclick="check(2, 2)"></button>
            </div>
        </div>
    </div>
    <div id="message"></div>
</div>

<div id="interimScreen" class="screen">
    <h1 style="font-size: 75px; color: var(--orange);">–ë–†–ê–í–û!</h1>
    <div id="interimResult" style="font-size: 130px; font-weight: 900; color: var(--dark-blue); margin: 20px 0;">0:0</div>
    <button class="start-btn" onclick="goToNextLevel()">
        <span>–°–õ–ï–î–í–ê–©–û –ù–ò–í–û</span>
        <span>üöÄ</span>
    </button>
</div>

<div id="endScreen" class="screen">
    <h1 style="font-size: 65px;">üèÜ –ö–†–ê–ô!</h1>
    <div id="finalResult" style="font-size: 110px; font-weight: 900; color: var(--orange);"></div>
    <h2 id="winnerName" style="font-size: 42px;"></h2>
    <button class="start-btn" onclick="location.reload()">
        <span>–ù–û–í–ê –ò–ì–†–ê</span>
        <span>üîÑ</span>
    </button>
</div>

<script>
const database = {
    1: [{w:"–ó–ò–î",o:["–ó–ò–î","–ó–ê–î","–ó–ò–ú"]},{w:"–°–û–ö",o:["–°–û–ö","–°–û–°","–°–û–õ"]},{w:"–ú–ï–î",o:["–ú–ï–¢","–ú–ï–î","–ú–ï–î–ò"]},{w:"–ú–ò–î–ê",o:["–ú–ò–î–ê","–ú–ò–õ–ê","–ú–û–î–ê"]},{w:"–ü–ê–†–ö",o:["–ü–†–ê–ö","–ü–ê–†–ê","–ü–ê–†–ö"]},{w:"–†–ï–ö–ê",o:["–†–™–ö–ê","–†–ï–ö–ê","–†–ï–ö–ò"]}],
    2: [{w:"–ö–û–¢–ï",o:["–ö–û–¢–û","–ö–û–¢–ï","–ö–£–ß–ï"]},{w:"–ö–†–™–ì",o:["–ö–†–ê–ì","–ö–†–™–ì","–ö–†–™–í"]},{w:"–ë–õ–û–ö",o:["–ë–õ–û–ö","–ë–õ–û–ì","–í–™–õ–ö"]},{w:"–°–¢–û–Ø",o:["–°–¢–ê–Ø","–°–¢–û–Ø","–°–¢–û–ü"]},{w:"–†–û–¢–û–†",o:["–†–û–¢–û–†","–ú–û–¢–û–†","–†–û–ë–û–¢"]},{w:"–ö–ù–ò–ì–ê",o:["–ö–ù–ò–ì–ò","–ö–ù–ò–ì–ê","–ö–ò–ù–ì–ê"]}],
    3: [{w:"–ë–õ–£–ó–ê",o:["–ë–õ–£–ó–ê","–ë–õ–£–°","–ë–£–ó–ê"]},{w:"–õ–ò–ù–ò–Ø",o:["–õ–ò–ù–ò–Ø","–õ–ò–ú–û–ù","–õ–£–ù–ò–Ø"]},{w:"–û–¢–ë–û–†",o:["–û–ë–û–†","–û–¢–ë–û–†","–û–¢–í–û–†"]},{w:"–°–õ–™–ù–¶–ï",o:["–°–õ–ê–ù–¶–ï","–°–õ–™–ù–¶–ï","–°–õ–™–ù–¶–û"]},{w:"–Ø–ë–™–õ–ö–ê",o:["–Ø–ì–û–î–ê","–Ø–ë–™–õ–ö–ê","–Ø–ë–™–õ–ö–û"]},{w:"–£–ß–ò–õ–ò–©–ï",o:["–£–ß–ï–õ–ò–©–ï","–£–ß–ò–õ–ò–©–ò","–£–ß–ò–õ–ò–©–ï"]}]
};

let level = 1, index = 0, score1 = 0, score2 = 0;
let currentWords = [], canAnswer = false, wrongAnswersCount = 0;

function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
    document.getElementById(id).style.display = 'flex';
}

function startLevel(n) {
    level = n; index = 0;
    currentWords = [...database[level]].sort(() => Math.random() - 0.5);
    document.getElementById("levelTag").innerText = "–ù–∏–≤–æ " + level;
    showScreen("gameScreen");
    loadQuestion();
}

function loadQuestion() {
    canAnswer = false; wrongAnswersCount = 0;
    const q = currentWords[index];
    const box = document.getElementById("wordBox");
    document.getElementById("message").innerText = "";
    box.style.color = "var(--bright-blue)";
    box.style.visibility = "visible";
    box.innerText = q.w;
    toggleButtons("hidden");

    setTimeout(() => {
        box.style.visibility = "hidden";
        setupButtons(q.o);
        toggleButtons("visible");
        canAnswer = true;
    }, 3000);
}

function setupButtons(options) {
    for (let i = 0; i < 3; i++) {
        const b1 = document.getElementById(`p1-opt${i}`);
        const b2 = document.getElementById(`p2-opt${i}`);
        b1.innerText = options[i]; b2.innerText = options[i];
        b1.className = "btn-p1"; b2.className = "btn-p2";
        b1.disabled = false; b2.disabled = false;
    }
}

function toggleButtons(state) {
    document.getElementById("p1-options").style.visibility = state;
    document.getElementById("p2-options").style.visibility = state;
}

function check(player, optIdx) {
    if (!canAnswer) return;
    const q = currentWords[index];
    
    if (q.o[optIdx] === q.w) {
        canAnswer = false;
        if (player === 1) { score1++; document.getElementById("score1").innerText = score1; }
        else { score2++; document.getElementById("score2").innerText = score2; }
        document.getElementById("message").style.color = "#4caf50";
        document.getElementById("message").innerText = "–ë–†–ê–í–û!";
        setTimeout(next, 1200);
    } else {
        disableSide(player);
        wrongAnswersCount++;
        
        // –§–ò–ö–°: –ê–ö–û –ò –î–í–ê–ú–ê–¢–ê –°–ì–†–ï–®–ê–¢
        if (wrongAnswersCount >= 2) {
            canAnswer = false;
            const box = document.getElementById("wordBox");
            box.style.color = "#d32f2f"; // –ü–æ–∫–∞–∑–≤–∞–º–µ –¥—É–º–∞—Ç–∞ –≤ —á–µ—Ä–≤–µ–Ω–æ
            box.style.visibility = "visible";
            document.getElementById("message").style.color = "#d32f2f";
            document.getElementById("message").innerText = "–ù–ò–ö–û–ô –ù–ï –ü–û–ó–ù–ê!";
            setTimeout(next, 3000); // –î–∞–≤–∞–º–µ 3 —Å–µ–∫—É–Ω–¥–∏ –¥–∞ –≤–∏–¥—è—Ç –∫–æ—è –µ –±–∏–ª–∞ –¥—É–º–∞—Ç–∞
        }
    }
}

function disableSide(p) {
    for (let i = 0; i < 3; i++) document.getElementById(`p${p}-opt${i}`).disabled = true;
}

function next() {
    index++;
    if (index >= currentWords.length) {
        if (level < 3) {
            document.getElementById("interimResult").innerText = `${score1}:${score2}`;
            showScreen("interimScreen");
        } else {
            showFinal();
        }
    } else loadQuestion();
}

function showFinal() {
    document.getElementById("finalResult").innerText = `${score1}:${score2}`;
    let winMsg = score1 > score2 ? "–ò–≥—Ä–∞—á 1 –ø–µ—á–µ–ª–∏!" : (score2 > score1 ? "–ò–≥—Ä–∞—á 2 –ø–µ—á–µ–ª–∏!" : "–†–∞–≤–µ–Ω—Å—Ç–≤–æ!");
    document.getElementById("winnerName").innerText = winMsg;
    showScreen("endScreen");
}

function goToNextLevel() { startLevel(level + 1); }
</script>

</body>
</html>